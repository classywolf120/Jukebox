<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<title>Sports Movie Jukebox</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at center, #444 0%, #2a2a2a 50%, #222 100%);
  height: 100vh;
  overflow: hidden;
}

/* COVERFLOW */
.coverflow {
  perspective: 1600px;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  height: 100vh;
  padding: 80px 5% 140px;
  -webkit-overflow-scrolling: touch;
  box-sizing: border-box;
}

.coverflow ul {
  display: flex;
  list-style: none;
  padding: 0;
  margin: 0;
  gap: 10px;
  align-items: center;
  min-width: max-content;
}

.coverflow li {
  flex: 0 0 auto;
  width: 380px;
  max-width: 70vw;
  scroll-snap-align: center;
  transition: transform 0.25s ease, opacity 0.25s ease;
}

.coverflow li.dummy {
  visibility: hidden;
  pointer-events: none;
}

.coverflow li img {
  width: 100%;
  border-radius: 20px;
  background: #000;
  cursor: pointer;
  box-shadow: 0 40px 80px rgba(0,0,0,0.85);
  -webkit-box-reflect: below 10px linear-gradient(transparent 0%, rgba(0,0,0,0.45) 100%);
  transition: box-shadow 0.35s ease, filter 0.35s ease;
}

/* NOW PLAYING */
.coverflow li.playing img {
  box-shadow:
    0 0 0 2px rgba(255,255,255,0.15),
    0 0 28px rgba(255,220,160,0.45),
    0 40px 90px rgba(0,0,0,0.95);
  filter: brightness(1.05);
}

/* VOLUME SLIDER */
#volumeWrap {
  position: fixed;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.2;
  transition: opacity 0.3s ease;
  z-index: 9999;
}

#volumeWrap.active {
  opacity: 0.9;
}

#volume {
  writing-mode: bt-lr;
  -webkit-appearance: slider-vertical;
  width: 10px;
  height: 220px;
}
</style>
</head>

<body>

<div class="coverflow" id="coverflow">
<ul>
  <li class="dummy"></li>
  <li class="dummy"></li>

  <li id="start"><img src="./Sandlot.jpg"></li>
  <li><img src="./Rocky.jpg"></li>
  <li><img src="./majorLeague.jpg"></li>
  <li><img src="./Slapshot.jpg"></li>
  <li><img src="./TheNatural.jpg"></li>
  <li><img src="./Rudy.jpg"></li>
  <li><img src="./ALeagueofTheirOwn.jpg"></li>
  <li><img src="./BriansSong.jpg"></li>
  <li><img src="./FieldOfDreams.jpg"></li>
  <li><img src="./BlindSide.jpg"></li>
  <li><img src="./LittleGiants.jpg"></li>
  <li><img src="./RookieofTheYear.jpg"></li>
  <li><img src="./Caddyshack.jpg"></li>

  <li class="dummy"></li>
  <li class="dummy"></li>
</ul>
</div>

<!-- AUDIO -->
<audio id="audio" preload="auto"></audio>

<!-- VOLUME -->
<div id="volumeWrap">
  <input type="range" id="volume" min="0" max="1" step="0.01" value="0.8">
</div>

<script>
const coverflow = document.getElementById("coverflow");
const items = [...coverflow.querySelectorAll("li:not(.dummy)")];
const audio = document.getElementById("audio");
const volume = document.getElementById("volume");
const volumeWrap = document.getElementById("volumeWrap");
const startItem = document.getElementById("start");

let currentItem = null;
let fadeTimer;

/* Coverflow transform */
function updateFlow() {
  const threshold = window.innerWidth * 0.4;
  items.forEach(item => {
    const r = item.getBoundingClientRect();
    const d = Math.abs((r.left + r.width / 2) - window.innerWidth / 2);
    const ratio = Math.max(0, 1 - d / threshold);
    const scale = 0.75 + 0.4 * ratio;
    const angle = 45 * (1 - ratio) * ((r.left + r.width / 2) < window.innerWidth / 2 ? 1 : -1);
    item.style.transform = `rotateY(${angle}deg) scale(${scale})`;
    item.style.opacity = 0.7 + 0.3 * ratio;
    item.style.zIndex = Math.round(ratio * 100);
  });
}

/* Center Sandlot */
window.addEventListener("load", () => {
  startItem.scrollIntoView({ inline: "center", block: "nearest" });
  updateFlow();
});

/* Poster click logic */
items.forEach(li => {
  li.addEventListener("click", () => {
    const img = li.querySelector("img");
    const src = img.src.replace(/\.jpg$/i, ".mp3");

    if (currentItem === li) {
      audio.paused ? audio.play() : audio.pause();
      li.classList.toggle("playing", !audio.paused);
      return;
    }

    items.forEach(i => i.classList.remove("playing"));
    audio.src = src;
    audio.play();
    li.classList.add("playing");
    currentItem = li;
  });
});

/* End cleanup */
audio.addEventListener("ended", () => {
  if (currentItem) currentItem.classList.remove("playing");
  currentItem = null;
});

/* Volume */
function setVolume(v) {
  audio.volume = v;
  audio.muted = false;
}

setVolume(volume.value);

volume.addEventListener("input", () => {
  setVolume(volume.value);
  volumeWrap.classList.add("active");
  clearTimeout(fadeTimer);
  fadeTimer = setTimeout(() => volumeWrap.classList.remove("active"), 2500);
});

volumeWrap.addEventListener("touchstart", () => {
  volumeWrap.classList.add("active");
});

/* Listeners */
coverflow.addEventListener("scroll", updateFlow, { passive: true });
window.addEventListener("resize", updateFlow);
</script>

</body>
</html>
